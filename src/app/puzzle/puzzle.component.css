/* base panel */
.panel {
  max-width: 980px;
  margin: 16px auto;
  padding: 12px;
  box-sizing: border-box;
}

/* controls */
.controls-row {
  display:flex;
  justify-content:space-between;
  gap:12px;
  align-items:flex-start;
  flex-wrap:wrap;
  margin-bottom:10px;
}
.left-controls { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.right-controls { display:flex; gap:12px; align-items:center; }

/* form elements */
.label { font-size:0.9rem; color:#6b7280; margin-right:6px; }
.input-state, .select { padding:8px 10px; border-radius:8px; border:1px solid #e6e9ef; background:#fff; }
.btn { padding:8px 12px; border-radius:10px; border:none; cursor:pointer; background:#eef2ff; color:#111827; }
.btn.primary { background: linear-gradient(180deg,#3466f2,#274fc4); color:#fff; box-shadow: 0 8px 20px rgba(52,102,242,0.12); }

/* playback buttons */
.playback { display:flex; gap:8px; align-items:center; }
.icon-btn {
  width:40px; height:40px; border-radius:8px; border:1px solid rgba(0,0,0,0.06);
  background:#fff; display:flex; align-items:center; justify-content:center; cursor:pointer;
  box-shadow:0 6px 16px rgba(16,24,40,0.04); transition: transform 160ms, box-shadow 160ms;
  font-size:14px;
}
.icon-btn:hover { transform: translateY(-3px); box-shadow:0 14px 28px rgba(16,24,40,0.08); }
.icon-btn:disabled { opacity:0.5; cursor:not-allowed; transform:none; box-shadow:none; background:#f3f4f6; }
.icon-btn.stop { background: linear-gradient(180deg,#fff7f6,#ffdede); color:#a33; border-color: rgba(163,51,51,0.08); }

/* speed control */
.speed-control { display:flex; flex-direction:column; gap:6px; align-items:flex-end; }
.speed-control input[type="range"] { width:160px; }
.speed-value { font-size:0.85rem; color:#6b7280; }

/* message */
.message-row { margin-bottom:8px; }
.message { font-weight:600; color:#111827; }

/* main layout */
.main-content {
  display:flex;
  gap:18px;
  align-items:flex-start;
  justify-content:center;
  width:100%;
  box-sizing:border-box;
  margin-top:12px;
}
.board-column { flex:1 1 0%; min-width:220px; }
.board-wrapper { width:100%; max-width:560px; margin:0 auto; }

/* stats column */
.stats-column { flex:0 0 280px; min-width:200px; box-sizing:border-box; }
.stats-panel {
  position:relative; top:0; padding:12px; border-radius:10px;
  background:#fff; box-shadow: 0 10px 26px rgba(16,24,40,0.06);
}
.stats-panel.sticky { position: sticky; top: 20px; }

/* metrics card */
.metrics-card { background: transparent; padding:6px 0; }
.metrics-grid { display:grid; grid-template-columns: 1fr; gap:10px; }
.metric .label { font-size:0.85rem; color:#6b7280; }
.metric .value { font-weight:700; font-size:1.05rem; margin-top:4px; }
.depth-note { margin-top:8px; color:#374151; font-size:0.95rem; }
.metrics-card.empty .placeholder { color:#6b7280; padding:10px; text-align:center; }

/* board styling */
.board {
  width:100%;
  aspect-ratio:1 / 1;
  position:relative;
  background:#fff;
  border-radius:10px;
  padding:10px;
  box-sizing:border-box;
  box-shadow:0 10px 26px rgba(16,24,40,0.04);
  background-image:
    linear-gradient(to right, rgba(0,0,0,0.04) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(0,0,0,0.04) 1px, transparent 1px);
  background-size: calc(100%/3) calc(100%/3);
  overflow:hidden;
}

/* invisible cells for layout */
.cell { width: calc(100% / 3); height: calc(100% / 3); float:left; box-sizing:border-box; }

/* tile: arancione, gradient e animazioni */
.tile {
  position:absolute;
  width: calc(100% / 3);
  height: calc(100% / 3);
  display:flex; align-items:center; justify-content:center;
  font-size:1.8rem; font-weight:700; color:#111827;
  border-radius:10px;
  background: linear-gradient(180deg,#fff4e6,#ffd08a 50%,#ff9f3b);
  border:1px solid rgba(0,0,0,0.06);
  box-shadow: 0 8px 22px rgba(17,24,39,0.12), inset 0 1px 0 rgba(255,255,255,0.35);
  transition: transform 320ms cubic-bezier(.22,.9,.25,1), box-shadow 220ms;
  transform-origin: 0 0;
  will-change: transform, box-shadow;
  z-index:2;
  user-select:none; touch-action:none;
}
.tile:hover { transform: translateY(-4px); box-shadow:0 18px 40px rgba(17,24,39,0.14); }
.tile:active { transform: scale(0.98); }

/* dragging visual hint */
.tile.dragging { transition:none !important; transform: scale(1.03) !important; box-shadow:0 28px 60px rgba(17,24,39,0.20) !important; z-index:40; }

/* solved effect */
.board.solved .tile { animation: solved-pop 560ms cubic-bezier(.18,.9,.32,1); filter: drop-shadow(0 12px 36px rgba(255,160,60,0.18)); }
@keyframes solved-pop {
  0% { transform: translateY(0) scale(1); }
  35% { transform: translateY(-10px) scale(1.06); }
  70% { transform: translateY(-4px) scale(1.02); }
  100% { transform: translateY(0) scale(1); }
}

/* responsive adjustments */
@media (max-width: 820px) {
  .main-content { flex-direction:column; gap:12px; }
  .stats-column { width:100%; order:2; }
  .board-column { order:1; }
  .board-wrapper { max-width:92vw; }
}
